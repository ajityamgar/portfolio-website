name: Random Auto Commits

on:
  schedule:
    - cron: '0 17 * * *'   # Runs daily at 10:30 PM IST (17:00 UTC)
  workflow_dispatch:

jobs:
  commit_job:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Set Commit Count Based on Day
        id: set_count
        run: |
          DAY=$(date +%u)

          if [ "$DAY" -ge 6 ]; then
            # Saturday / Sunday
            COUNT=$(( RANDOM % 16 + 20 ))   # 20–35 commits
          else
            # Monday–Friday
            COUNT=$(( RANDOM % 17 + 3 ))    # 3–19 commits
          fi

          echo "count=$COUNT" >> $GITHUB_OUTPUT

      - name: Make Random Commits
        run: |
          for ((i=1; i<=${{ steps.set_count.outputs.count }}; i++))
          do
            echo "$(date) - $i" >> requirement.txt
            git config --local user.email "ajityamgar855@gmail.com"
            git config --local user.name "Ajit"
            git add requirement.txt
            git commit -m "Random commit $i"
          done
          git push
